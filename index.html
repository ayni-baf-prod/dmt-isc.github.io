<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DMT Data Dictionary</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-bg: #ecf0f1;
            --text-color: #333;
            --sidebar-width: 250px;
            --header-height: 60px;
            --finance-color: #27ae60;
            --investment-color: #f39c12;
            --actuarial-color: #9b59b6;
            --distribution-color: #16a085;
            --legal-color: #c0392b;
            --risk-color: #2980b9;
            --talent-color: #d35400;
            --operations-color: #8e44ad;
            --ceo-color: #7f8c8d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light-bg);
            color: var(--text-color);
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--primary-color);
            color: white;
            padding: 1rem 0;
            height: 100vh;
            position: fixed;
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 0 1rem 1rem;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-header h2 {
            margin-bottom: 0.5rem;
        }

        .nav-menu {
            list-style: none;
            padding: 1rem 0;
        }

        .nav-item {
            padding: 0.75rem 1rem;
            border-left: 4px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
        }

        .nav-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
            border-left: 4px solid var(--secondary-color);
        }

        .nav-item.active {
            background-color: rgba(255, 255, 255, 0.2);
            border-left: 4px solid var(--secondary-color);
        }

        .nav-item a {
            color: white;
            text-decoration: none;
            display: block;
        }

        .nav-item.finance { border-left-color: var(--finance-color); }
        .nav-item.investment { border-left-color: var(--investment-color); }
        .nav-item.actuarial { border-left-color: var(--actuarial-color); }
        .nav-item.distribution { border-left-color: var(--distribution-color); }
        .nav-item.legal { border-left-color: var(--legal-color); }
        .nav-item.risk { border-left-color: var(--risk-color); }
        .nav-item.talent { border-left-color: var(--talent-color); }
        .nav-item.operations { border-left-color: var(--operations-color); }
        .nav-item.ceo { border-left-color: var(--ceo-color); }

        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 1rem;
        }

        .header {
            background-color: white;
            padding: 1rem;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
        }

        .content-area {
            background-color: white;
            padding: 1.5rem;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .module-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .module-card {
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .module-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .module-card-header {
            color: white;
            padding: 1rem;
        }

        .module-card-body {
            padding: 1rem;
        }

        .module-card-footer {
            padding: 0.5rem 1rem;
            background-color: var(--light-bg);
            text-align: right;
        }

        .module-card-footer a {
            color: var(--secondary-color);
            text-decoration: none;
        }

        .finance-header { background-color: var(--finance-color); }
        .investment-header { background-color: var(--investment-color); }
        .actuarial-header { background-color: var(--actuarial-color); }
        .distribution-header { background-color: var(--distribution-color); }
        .legal-header { background-color: var(--legal-color); }
        .risk-header { background-color: var(--risk-color); }
        .talent-header { background-color: var(--talent-color); }
        .operations-header { background-color: var(--operations-color); }
        .ceo-header { background-color: var(--ceo-color); }

        .recent-updates {
            margin-top: 2rem;
            height: 400px; /* Adjust the height as needed */
            overflow-y: scroll;
            padding: 10px;
            border: 1px solid #ddd;
        }

        .update-item {
            display: flex;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid #e1e4e8;
        }

        .update-item img {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            margin-right: 1rem;
        }

        .update-content {
            flex: 1;
        }

        .commit-message {
            font-weight: 600;
            margin-bottom: 0.2rem;
        }

        .commit-meta {
            font-size: 0.85rem;
            color: #586069;
        }

        .commit-meta a {
            color: #0366d6;
            text-decoration: none;
        }

        .commit-meta a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
            }
            .main-content {
                margin-left: 0;
            }
            body {
                flex-direction: column;
            }
            .module-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <aside class="sidebar">
        <div class="sidebar-header">
            <h2>DMT Data Dictionary</h2>
            <p>Data Warehouse</p>
        </div>
        <ul class="nav-menu">
            <li class="nav-item active"><a href="index.html">Home</a></li>
            <li class="nav-item finance"><a href="dwh_twpro.html">TW-Pro</a></li>
            <li class="nav-item investment"><a href="#">Request</a></li>
            <li class="nav-item actuarial"><a href="#">Drivers</a></li>
            <li class="nav-item distribution"><a href="#">Data</a></li>
            <li class="nav-item legal"><a href="#">Clients</a></li>
            <li class="nav-item risk"><a href="#">Infra-Costs</a></li>
            <li class="nav-item talent"><a href="#">Infra-Performance</a></li>
            <li class="nav-item operations"><a href="#">Infra-Capacity</a></li>
        </ul>
    </aside>

    <main class="main-content">
        <div class="header">
            <h1>DMT Datawarehouse Dictionary</h1>
            <p>Access and explore data marts across all business modules</p>
        </div>

        <section class="content-area">
            <h2>Welcome to the Portal</h2>
            <p>This portal provides a comprehensive view of all data marts in our DMT data warehouse. Use the navigation on the left to explore specific business modules.</p>
            
            <div class="module-grid">
                <div class="module-card">
                    <div class="module-card-header finance-header"><h3>TW-Pro</h3></div>
                    <div class="module-card-body"><p>Proporciona un resumen general del desempeño en Twitter, con un enfoque en la cuota de consumo y el rendimiento de los drivers</p></div>
                    <div class="module-card-footer"><a href="dwh_twpro.html">Explore →</a></div>
                </div>
                <div class="module-card">
                    <div class="module-card-header investment-header"><h3>Request</h3></div>
                    <div class="module-card-body"><p>Monitorea RQs ejecutados por día y capacidad de tweets generados para prever picos de carga.</p></div>
                    <div class="module-card-footer"><a href="#">Explore →</a></div>
                </div>
                <div class="module-card">
                    <div class="module-card-header actuarial-header"><h3>Drivers</h3></div>
                    <div class="module-card-body"><p>Evalúa el uso y eficiencia de los drivers, segmentados por industria y tipo.</p></div>
                    <div class="module-card-footer"><a href="#">Explore →</a></div>
                </div>
                <div class="module-card">
                    <div class="module-card-header distribution-header"><h3>Data</h3></div>
                    <div class="module-card-body"><p>Monitorea la cantidad y calidad de datos generados por los drivers.</p></div>
                    <div class="module-card-footer"><a href="#">Explore →</a></div>
                </div>
                <div class="module-card">
                    <div class="module-card-header legal-header"><h3>Clients</h3></div>
                    <div class="module-card-body"><p>Monitorea el uso y costos de los clientes, analiza tendencias de uso y comportamiento.</p></div>
                    <div class="module-card-footer"><a href="#">Explore →</a></div>
                </div>
                <div class="module-card">
                    <div class="module-card-header risk-header"><h3>Infra-Costs</h3></div>
                    <div class="module-card-body"><p>Analiza los costos de infraestructura desglosados por servicio.</p></div>
                    <div class="module-card-footer"><a href="#">Explore →</a></div>
                </div>
                <div class="module-card">
                    <div class="module-card-header talent-header"><h3>Infra-Performance</h3></div>
                    <div class="module-card-body"><p>Monitorea el rendimiento técnico de los servicios en la nube.</p></div>
                    <div class="module-card-footer"><a href="#">Explore →</a></div>
                </div>
                <div class="module-card">
                    <div class="module-card-header operations-header"><h3>Infra-Capacity</h3></div>
                    <div class="module-card-body"><p>Evalúa la capacidad de los servicios, Identifica recursos cercanos a su límite para planificar expansiones</p></div>
                    <div class="module-card-footer"><a href="#">Explore →</a></div>
                </div>
            </div>
            
            <div class="recent-updates">
                <h2>Recent Updates</h2>
                <!-- Commits will be dynamically added here -->
            </div>
        </section>
    </main>

    <script>
        // Replace with your personal access token (for testing only; use a backend in production)
      
/*
        fetch('https://api.github.com/repos/ayni-baf-prod/dmt_isc.github.io/commits', {
            headers: {
                Authorization: `token ${githubToken}`,
                Accept: 'application/vnd.github.v3+json',
            },
        }) */
       fetch('https://api.github.com/repos/ayni-baf-prod/dmt-isc.github.io/commits')
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                const updatesContainer = document.querySelector('.recent-updates');
                updatesContainer.innerHTML = '<h2>Recent Updates</h2>'; // Reset the section

                data.forEach(commit => {
                    const updateItem = document.createElement('div');
                    updateItem.className = 'update-item';

                    updateItem.innerHTML = `
                        <img src="${commit.author?.avatar_url || 'https://via.placeholder.com/32'}" alt="${commit.commit.author.name} avatar">
                        <div class="update-content">
                            <div class="commit-message">${commit.commit.message}</div>
                            <div class="commit-meta">
                                ${commit.commit.author.name} • ${new Date(commit.commit.author.date).toLocaleString()}
                            </div>
                        </div>
                    `;

                    updatesContainer.appendChild(updateItem);
                });
            })
            .catch(error => {
                console.error('Error fetching commits:', error);
                const updatesContainer = document.querySelector('.recent-updates');
                updatesContainer.innerHTML += '<p>Failed to load commits. Please check the console for details.</p>';
            });
    </script>
    
</body>
</html>
